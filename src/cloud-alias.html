<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="ajax-query.html">
<link rel="import" href="fire-query.html">

<dom-module id="cloud-alias">

  <template>
  
    <style>
      :host {
        display: block;
      }
    </style>

    <fire-query path="[[aliaspath]]" item="_path_" data="{{alias}}"></fire-query>  

  </template>

  <!-- Creates the element's prototype and registers it -->
  <script>

    Polymer({

      is: 'cloud-alias',
      
      properties: {

        alias: {  // object with several alias-name-objects (fi. genus-longnames) 
          type: Object,
          observer: 'checkAlias',
          notify: true
        }, 

        aliaspath: {
          type: String,
          value: function(){return "clouds/alias";},
        }

      },

      ready: function(){
      },

      checkAlias: function(alias, oldali) { 
        console.log("alias objects available", alias);
      },

      getAlias: function(type, abbr) { // return abbr; console.log(type, abbr);
        if (!this.alias) return abbr; 
        var alias = this.alias[type]; 
        if (!alias) return abbr; 

        console.log("alias for type="+type, alias);
        if (alias[abbr]) return alias[abbr];  
        return abbr; 
      }

    });
  </script>

</dom-module>