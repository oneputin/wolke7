<script>
	// Support-Functions 
var popupTop =  function(e, that, popupid) { // console.log("Utility-contentToTop:", this, "class=" + this.thumbclass)
    // On click-event action from content (image) within a paper-button 

    // A. Transfer a popup to the top of browser-window to overlap all alements 

    var body = document.querySelector('body'),
        popup = body.querySelector('#'+popupid);

    if (!popup) { // console.log("mode popup, id=", that.popupid);
        popup = Polymer.dom(that.root).querySelector('#'+popupid);
        body.appendChild(popup);
    }

    // B. DETECT if click in x.thumb image element

	if (e) {

	    var epath = Polymer.dom(e).path;  //console.log("event-path-log:", epath)
	
	    // for (var el of epath) { // NOT accepeted by polymer build
	    // for (i = 0, len = epath.length; i < len; i++) { 
	    var fullsrc, el, i=0, len=epath.length;
	    for (; i < len; i++) { 
	        el = epath[i];
	        if (el.className === "thumb") {
	            fullsrc = el.src;
	            break;
	        }
	    } 
	    if (fullsrc) { 
		    // C. Fill img-content into popup

		    that.fullsrc = fullsrc; // property des parent-elements 

		    var metaContainer = popup.querySelector('p');
		    if (metaContainer)  metaContainer.innerText = fullsrc; // for ctrl only 
		}
	}

	// 4. Open popup
    popup.open();
}

var previewPage =  function(e, that, popupid) { // console.log("Utility-contentToTop:", this, "class=" + this.thumbclass)
    // On click-event action from content = image with class="thumb" (within a paper-button) 

    // DETECT if click in x.thumb image element

	if (e) {

	    var epath = Polymer.dom(e).path;  //console.log("event-path-log:", epath)
	
	    var preview={}, el, i=0, len=epath.length;

	    for (; i < len; i++) { 
	        el = epath[i];
	        if (el.className === "thumb") {
	            fullsrc = el.src;
	            break;
	        }
	    } 
		// C. Fill img-content into popup
	    if (fullsrc) {
	    	preview.imgurl = fullsrc;
	    	preview.footer = "<a href='"+fullsrc+"' target='_blank'>download</a>"   
	    	that.preview = preview; console.log("preview", preview); 
			
		}
	}


}


</script>

