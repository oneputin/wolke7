<link rel="import" href="../bower_components/polymer/polymer.html">

<script src="https://www.gstatic.com/firebasejs/3.2.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey:       "AIzaSyC32ZX3rKvRFJTGZ7vVxxQX-WJCDPC01Dk",
    authDomain:   "wolke7-fd941.firebaseapp.com",
    databaseURL:  "https://wolke7-fd941.firebaseio.com",
    storageBucket: "wolke7-fd941.appspot.com",
  };
  firebase.initializeApp(config);
</script>

<dom-module id="jsondata-fire">

  <template>

    <style>
      :host {
        display: block;
      }
    </style>

    <!-- <h5>query-log: firebase [[url]]/[[path]]</h5> -->

  </template>

  <script>


    Polymer({
      is: 'jsondata-fire',
      properties: {
        appname: {
          type: String,
          value: 'wolke7' 
        },
        url: {
          type: String,
          value: '', // https://wolke7-fd941.firebaseio.com' 
        },
        path:{
          type: String,
          value: '', //'/catalog/low' 
          observer : 'updateQuery'
        },
        data: {
          type: Object,
          notify: true,
          observer: '__dataChanged'
        }
      },

      updateQuery: function(path, oldpath) { console.log("fbquery, path=", path);
        var that = this; // ALTMODISCH 
        firebase.database().ref(path).once('value').then(function(snapshot) { 
          that.data = snapshot.val();
          // this.data = snapshot.val(); console.log("fb-queried:", data);
        })
      },

      __dataChanged: function (newData, oldData) {
        // console.log("LOG:new=",newData,"old=", oldData) ; // do something when the query returns values
      }

    });
  </script>
</dom-module>